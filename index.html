<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foto's toevoegen aan gedeeld album</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #f0f4fa;
    --ink: #0f1f3d;
    --blue: #1a56db;
    --blue-dark: #1344b8;
    --blue-light: #e8effe;
    --muted: #5c7099;
    --card: #ffffff;
    --border: #dce6f5;
    --red: #d93025;
    --red-light: #fce8e6;
  }

  body {
    background: var(--bg);
    color: var(--ink);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem;
  }

  .container { max-width: 440px; width: 100%; }

  /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
  .header {
    text-align: center;
    margin-bottom: 2rem;
    animation: fadeUp 0.6s ease both;
  }

  .icon { font-size: 2.4rem; display: block; margin-bottom: 0.85rem; }

  h1 {
    font-weight: 600;
    font-size: 1.45rem;
    line-height: 1.2;
    margin-bottom: 0.35rem;
    letter-spacing: -0.02em;
    color: var(--ink);
  }

  h1 em { font-style: normal; color: var(--blue); }
  .subtitle { color: var(--muted); font-size: 0.85rem; }

  /* ‚îÄ‚îÄ Album link card ‚îÄ‚îÄ */
  .album-card {
    background: var(--blue);
    border-radius: 14px;
    padding: 1.1rem 1.25rem;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.85rem;
    animation: fadeUp 0.5s 0.05s ease both;
  }

  .album-card-icon { font-size: 1.4rem; flex-shrink: 0; }
  .album-card-text { flex: 1; min-width: 0; }

  .album-card-label {
    color: rgba(255,255,255,0.6);
    font-size: 0.67rem;
    text-transform: uppercase;
    letter-spacing: 0.09em;
    margin-bottom: 0.15rem;
    font-weight: 500;
  }

  .album-link-btn {
    display: block;
    color: #fff;
    font-size: 0.92rem;
    font-weight: 500;
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: opacity 0.2s;
  }

  .album-link-btn:hover { opacity: 0.8; text-decoration: underline; }

  .album-link-btn.no-link {
    color: rgba(255,255,255,0.5);
    font-style: italic;
    font-size: 0.85rem;
    font-weight: 400;
    pointer-events: none;
  }

  /* Admin gear icon ‚Äî subtle, bottom-right corner */
  .admin-trigger {
    position: fixed;
    bottom: 1.2rem;
    right: 1.2rem;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--card);
    border: 1.5px solid var(--border);
    color: var(--muted);
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: color 0.2s, border-color 0.2s;
    z-index: 50;
  }

  .admin-trigger:hover { color: var(--blue); border-color: var(--blue); }

  /* ‚îÄ‚îÄ Modals shared ‚îÄ‚îÄ */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(10,25,60,0.4);
    z-index: 100;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    backdrop-filter: blur(4px);
  }

  .modal-overlay.open { display: flex; }

  .modal {
    background: #fff;
    border-radius: 18px;
    padding: 1.6rem 1.4rem;
    width: 100%;
    max-width: 360px;
    box-shadow: 0 16px 48px rgba(20,60,140,0.15);
    animation: modalPop 0.22s ease;
  }

  @keyframes modalPop {
    from { opacity: 0; transform: scale(0.94) translateY(10px); }
    to   { opacity: 1; transform: scale(1) translateY(0); }
  }

  .modal h2 {
    font-weight: 600;
    font-size: 1.05rem;
    margin-bottom: 0.3rem;
    letter-spacing: -0.01em;
    color: var(--ink);
  }

  .modal p {
    color: var(--muted);
    font-size: 0.79rem;
    margin-bottom: 0.9rem;
    line-height: 1.5;
  }

  .modal label {
    display: block;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 0.3rem;
  }

  .modal input {
    width: 100%;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 0.65rem 0.9rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    color: var(--ink);
    background: var(--bg);
    outline: none;
    transition: border-color 0.2s, background 0.2s;
    margin-bottom: 0.75rem;
  }

  .modal input:focus { border-color: var(--blue); background: #fff; }
  .modal input.error { border-color: var(--red); }

  .error-msg {
    font-size: 0.75rem;
    color: var(--red);
    margin-top: -0.5rem;
    margin-bottom: 0.65rem;
    display: none;
  }

  .error-msg.visible { display: block; }

  .modal-actions { display: flex; gap: 0.6rem; margin-top: 0.2rem; }

  .btn-primary {
    flex: 1;
    background: var(--blue);
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 0.65rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn-primary:hover { background: var(--blue-dark); }

  .btn-secondary {
    background: var(--blue-light);
    color: var(--blue);
    border: none;
    border-radius: 10px;
    padding: 0.65rem 1rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn-secondary:hover { background: #d5e3f8; }

  .btn-danger {
    background: var(--red-light);
    color: var(--red);
    border: none;
    border-radius: 10px;
    padding: 0.65rem 1rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn-danger:hover { background: #f5c6c2; }

  .divider {
    border: none;
    border-top: 1.5px solid var(--border);
    margin: 1rem 0;
  }

  /* ‚îÄ‚îÄ Steps ‚îÄ‚îÄ */
  .steps { display: flex; flex-direction: column; gap: 0.5rem; }

  .step {
    background: var(--card);
    border-radius: 12px;
    padding: 0.95rem 1.1rem;
    display: flex;
    align-items: flex-start;
    gap: 0.9rem;
    border: 1px solid var(--border);
    animation: fadeUp 0.5s ease both;
  }

  .step:nth-child(1) { animation-delay: 0.10s; }
  .step:nth-child(2) { animation-delay: 0.17s; }
  .step:nth-child(3) { animation-delay: 0.24s; }
  .step:nth-child(4) { animation-delay: 0.31s; }
  .step:nth-child(5) { animation-delay: 0.38s; }
  .step:nth-child(6) { animation-delay: 0.45s; }

  .step-num {
    background: var(--blue-light);
    color: var(--blue);
    font-size: 0.78rem;
    font-weight: 700;
    width: 26px;
    height: 26px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
  }

  .step-content { flex: 1; }
  .step-title { font-weight: 500; font-size: 0.9rem; margin-bottom: 0.15rem; color: var(--ink); }
  .step-desc { color: var(--muted); font-size: 0.79rem; line-height: 1.45; }
  .step-desc strong { color: var(--ink); font-weight: 500; }
  .step-icon { font-size: 1rem; flex-shrink: 0; margin-top: 3px; opacity: 0.7; }

  .tip {
    margin-top: 1.1rem;
    background: var(--blue-light);
    border-left: 3px solid var(--blue);
    border-radius: 0 10px 10px 0;
    padding: 0.75rem 0.9rem;
    font-size: 0.78rem;
    color: var(--muted);
    animation: fadeUp 0.5s 0.52s ease both;
  }

  .tip strong { color: var(--blue); font-weight: 500; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <span class="icon">üì∏</span>
    <h1>Foto's in het <em>gedeelde album</em> zetten</h1>
    <p class="subtitle">Volg deze stappen op je iPhone of iPad</p>
  </div>

  <!-- Album link card -->
  <div class="album-card">
    <div class="album-card-icon">üîó</div>
    <div class="album-card-text">
      <div class="album-card-label">Gedeeld album</div>
      <a id="albumLink" href="#" target="_blank" class="album-link-btn no-link">Wordt geladen‚Ä¶</a>
    </div>
  </div>

  <!-- Steps -->
  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <div class="step-content">
        <div class="step-title">Open de Foto's-app</div>
        <div class="step-desc">Ga naar je Camera Rol of een album met de foto's die je wilt delen.</div>
      </div>
      <div class="step-icon">üñºÔ∏è</div>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <div class="step-content">
        <div class="step-title">Selecteer foto's</div>
        <div class="step-desc">Tik op <strong>Selecteer</strong> (rechtsboven) en tik alle foto's aan.</div>
      </div>
      <div class="step-icon">‚òëÔ∏è</div>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <div class="step-content">
        <div class="step-title">Deel via het deelknopje</div>
        <div class="step-desc">Tik op het <strong>deelicoon</strong> linksonder (vierkantje met pijltje omhoog).</div>
      </div>
      <div class="step-icon">‚¨ÜÔ∏è</div>
    </div>
    <div class="step">
      <div class="step-num">4</div>
      <div class="step-content">
        <div class="step-title">Kies "Voeg toe aan gedeeld album"</div>
        <div class="step-desc">Scroll naar beneden in het deelmenu en tik op <strong>Voeg toe aan gedeeld album</strong>.</div>
      </div>
      <div class="step-icon">Ôºã</div>
    </div>
    <div class="step">
      <div class="step-num">5</div>
      <div class="step-content">
        <div class="step-title">Selecteer het juiste album</div>
        <div class="step-desc">Kies het album uit de lijst, of maak een <strong>Nieuw gedeeld album</strong> aan.</div>
      </div>
      <div class="step-icon">üìÅ</div>
    </div>
    <div class="step">
      <div class="step-num">6</div>
      <div class="step-content">
        <div class="step-title">Tik op "Publiceer"</div>
        <div class="step-desc">Bevestig met <strong>Publiceer</strong>. De foto's zijn nu zichtbaar voor iedereen!</div>
      </div>
      <div class="step-icon">‚úÖ</div>
    </div>
  </div>

  <div class="tip">
    <strong>üí° Tip:</strong> Zorg dat <em>Gedeelde albums</em> aan staat via Instellingen ‚Üí Foto's ‚Üí Gedeelde albums.
  </div>
</div>

<!-- Verborgen admin-knopje rechtsonder -->
<button class="admin-trigger" onclick="openPasswordModal()" title="Beheer">‚öôÔ∏è</button>

<!-- Modal 1: Wachtwoord invoeren -->
<div class="modal-overlay" id="passwordModal" onclick="handleOverlay(event,'passwordModal')">
  <div class="modal">
    <h2>üîí Beheerderslogin</h2>
    <p>Voer het beheerwachtwoord in om de albumlink te beheren.</p>
    <label for="passwordInput">Wachtwoord</label>
    <input type="password" id="passwordInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <div class="error-msg" id="passwordError">Onjuist wachtwoord. Probeer opnieuw.</div>
    <div class="modal-actions">
      <button class="btn-secondary" onclick="closeModal('passwordModal')">Annuleer</button>
      <button class="btn-primary" onclick="checkPassword()">Inloggen</button>
    </div>
  </div>
</div>

<!-- Modal 2: Admin beheerpaneel -->
<div class="modal-overlay" id="adminModal" onclick="handleOverlay(event,'adminModal')">
  <div class="modal">
    <h2>‚öôÔ∏è Albumlink beheren</h2>
    <p>Stel de uitnodigingslink in van je gedeelde Apple-album. De link is zichtbaar voor alle bezoekers.</p>
    <label for="linkInput">Albumlink</label>
    <input type="url" id="linkInput" placeholder="https://share.icloud.com/photos/..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    <div class="modal-actions">
      <button class="btn-danger" onclick="deleteLink()">Verwijder</button>
      <button class="btn-secondary" onclick="closeModal('adminModal')">Annuleer</button>
      <button class="btn-primary" onclick="saveLink()">Opslaan</button>
    </div>

    <hr class="divider">
    <p style="font-size:0.73rem; color:var(--muted); margin-bottom:0;">
      <strong style="color:var(--ink);">Wachtwoord wijzigen?</strong><br>
      Open het HTML-bestand en zoek op <code style="background:var(--bg);padding:1px 4px;border-radius:4px;font-size:0.72rem;">ADMIN_PASSWORD</code> om het aan te passen.
    </p>
  </div>
</div>

<script>
  // ‚îÄ‚îÄ Pas dit wachtwoord aan naar wens ‚îÄ‚îÄ
  const ADMIN_PASSWORD = 'feest2025';
  const STORAGE_KEY    = 'sharedAlbumLink';

  // ‚îÄ‚îÄ Storage helpers (shared = zichtbaar voor iedereen) ‚îÄ‚îÄ
  async function getSharedLink() {
    try {
      const result = await window.storage.get(STORAGE_KEY, true);
      return result ? result.value : null;
    } catch { return null; }
  }

  async function setSharedLink(url) {
    await window.storage.set(STORAGE_KEY, url, true);
  }

  async function removeSharedLink() {
    await window.storage.delete(STORAGE_KEY, true);
  }

  // ‚îÄ‚îÄ Render link card ‚îÄ‚îÄ
  async function loadLink() {
    const saved = await getSharedLink();
    const el = document.getElementById('albumLink');
    if (saved) {
      el.href = saved;
      const display = saved.replace(/^https?:\/\//, '').replace(/\/$/, '');
      el.textContent = display.length > 40 ? display.slice(0, 40) + '‚Ä¶' : display;
      el.classList.remove('no-link');
    } else {
      el.href = '#';
      el.textContent = 'Nog geen link ingesteld';
      el.classList.add('no-link');
    }
  }

  // ‚îÄ‚îÄ Password modal ‚îÄ‚îÄ
  function openPasswordModal() {
    document.getElementById('passwordInput').value = '';
    document.getElementById('passwordError').classList.remove('visible');
    document.getElementById('passwordInput').classList.remove('error');
    openModal('passwordModal');
    setTimeout(() => document.getElementById('passwordInput').focus(), 120);
  }

  async function checkPassword() {
    const val = document.getElementById('passwordInput').value;
    if (val === ADMIN_PASSWORD) {
      closeModal('passwordModal');
      openAdminModal();
    } else {
      document.getElementById('passwordError').classList.add('visible');
      document.getElementById('passwordInput').classList.add('error');
      document.getElementById('passwordInput').value = '';
      document.getElementById('passwordInput').focus();
    }
  }

  // ‚îÄ‚îÄ Admin modal ‚îÄ‚îÄ
  async function openAdminModal() {
    const saved = await getSharedLink();
    document.getElementById('linkInput').value = saved || '';
    openModal('adminModal');
    setTimeout(() => document.getElementById('linkInput').focus(), 120);
  }

  async function saveLink() {
    let val = document.getElementById('linkInput').value.trim();
    if (!val) { await removeSharedLink(); }
    else {
      if (!val.startsWith('http')) val = 'https://' + val;
      await setSharedLink(val);
    }
    await loadLink();
    closeModal('adminModal');
  }

  async function deleteLink() {
    if (!confirm('Weet je zeker dat je de albumlink wilt verwijderen?')) return;
    await removeSharedLink();
    await loadLink();
    closeModal('adminModal');
  }

  // ‚îÄ‚îÄ Modal helpers ‚îÄ‚îÄ
  function openModal(id)  { document.getElementById(id).classList.add('open'); }
  function closeModal(id) { document.getElementById(id).classList.remove('open'); }

  function handleOverlay(e, id) {
    if (e.target === document.getElementById(id)) closeModal(id);
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
      closeModal('passwordModal');
      closeModal('adminModal');
    }
    if (e.key === 'Enter') {
      if (document.getElementById('passwordModal').classList.contains('open')) checkPassword();
      if (document.getElementById('adminModal').classList.contains('open')) saveLink();
    }
  });

  // ‚îÄ‚îÄ Init ‚îÄ‚îÄ
  loadLink();
</script>
</body>
</html>
