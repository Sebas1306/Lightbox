<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foto's toevoegen aan gedeeld album</title>
<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  âœï¸  INSTELLINGEN
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const CONFIG = {
    JSONBIN_ID:     '6998419143b1c97be98e06b9',
    JSONBIN_KEY:    '$2a$10$aKSu0JyEvLyaw5HaVrPK0OQ6rdnA85viFzpbazmiO5xKY4JXopu3G',
    ADMIN_PASSWORD: 'feest2025',   // â† verander dit naar jouw wachtwoord
  };
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg:          #f9f5ef;
    --bg2:         #f2ece2;
    --ink:         #1c1510;
    --warm:        #cc6b2c;
    --warm-dark:   #a8521a;
    --warm-light:  #faeee0;
    --warm-mid:    #e8d5be;
    --muted:       #7a6654;
    --card:        #ffffff;
    --border:      #e4d9cc;
    --red:         #c0392b;
    --red-light:   #fdecea;
  }

  body {
    background: var(--bg);
    color: var(--ink);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem;
  }

  .container { max-width: 440px; width: 100%; }

  /* â”€â”€ Header â”€â”€ */
  .header {
    text-align: center;
    margin-bottom: 2rem;
    animation: fadeUp 0.6s ease both;
  }

  .icon { font-size: 2.5rem; display: block; margin-bottom: 0.9rem; }

  h1 {
    font-family: 'Lora', serif;
    font-weight: 500;
    font-size: 1.6rem;
    line-height: 1.25;
    margin-bottom: 0.4rem;
    color: var(--ink);
  }

  h1 em { font-style: italic; color: var(--warm); }
  .subtitle { color: var(--muted); font-size: 0.85rem; font-weight: 400; }

  /* â”€â”€ Album link card â”€â”€ */
  .album-card {
    background: var(--warm);
    border-radius: 16px;
    padding: 1.1rem 1.25rem;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.85rem;
    animation: fadeUp 0.5s 0.05s ease both;
    box-shadow: 0 4px 20px rgba(204,107,44,0.25);
  }

  .album-card-icon { font-size: 1.5rem; flex-shrink: 0; }
  .album-card-text { flex: 1; min-width: 0; }

  .album-card-label {
    color: rgba(255,255,255,0.65);
    font-size: 0.67rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 0.15rem;
    font-weight: 600;
  }

  .album-link-btn {
    display: block;
    color: #fff;
    font-size: 0.92rem;
    font-weight: 500;
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: opacity 0.2s;
  }

  .album-link-btn:hover { opacity: 0.8; text-decoration: underline; }

  .album-link-btn.no-link {
    color: rgba(255,255,255,0.5);
    font-style: italic;
    font-size: 0.85rem;
    font-weight: 400;
    pointer-events: none;
  }

  /* â”€â”€ Admin trigger â”€â”€ */
  .admin-trigger {
    position: fixed;
    bottom: 1.2rem;
    right: 1.2rem;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--card);
    border: 1.5px solid var(--border);
    color: var(--muted);
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: color 0.2s, border-color 0.2s;
    z-index: 50;
  }

  .admin-trigger:hover { color: var(--warm); border-color: var(--warm); }

  /* â”€â”€ Modals â”€â”€ */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(28,21,16,0.45);
    z-index: 100;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    backdrop-filter: blur(4px);
  }

  .modal-overlay.open { display: flex; }

  .modal {
    background: var(--card);
    border-radius: 20px;
    padding: 1.6rem 1.4rem;
    width: 100%;
    max-width: 380px;
    box-shadow: 0 16px 48px rgba(100,60,20,0.15);
    animation: modalPop 0.22s ease;
  }

  @keyframes modalPop {
    from { opacity: 0; transform: scale(0.94) translateY(10px); }
    to   { opacity: 1; transform: scale(1) translateY(0); }
  }

  .modal h2 {
    font-family: 'Lora', serif;
    font-weight: 500;
    font-size: 1.1rem;
    margin-bottom: 0.3rem;
    color: var(--ink);
  }

  .modal p {
    color: var(--muted);
    font-size: 0.79rem;
    margin-bottom: 0.9rem;
    line-height: 1.55;
  }

  .modal label {
    display: block;
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.3rem;
  }

  .modal input {
    width: 100%;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 0.65rem 0.9rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    color: var(--ink);
    background: var(--bg);
    outline: none;
    transition: border-color 0.2s, background 0.2s;
    margin-bottom: 0.75rem;
  }

  .modal input:focus { border-color: var(--warm); background: #fff; }
  .modal input.error { border-color: var(--red); }

  .error-msg {
    font-size: 0.75rem;
    color: var(--red);
    margin-top: -0.5rem;
    margin-bottom: 0.65rem;
    display: none;
  }
  .error-msg.visible { display: block; }

  .modal-actions { display: flex; gap: 0.6rem; margin-top: 0.2rem; }

  .btn-primary {
    flex: 1;
    background: var(--warm);
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 0.65rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
  }

  .btn-primary:hover:not(:disabled) { background: var(--warm-dark); }
  .btn-primary:disabled { opacity: 0.55; cursor: not-allowed; }

  .btn-secondary {
    background: var(--warm-light);
    color: var(--warm-dark);
    border: none;
    border-radius: 10px;
    padding: 0.65rem 1rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn-secondary:hover { background: var(--warm-mid); }

  .btn-danger {
    background: var(--red-light);
    color: var(--red);
    border: none;
    border-radius: 10px;
    padding: 0.65rem 0.9rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn-danger:hover { background: #f5c6c2; }

  .spinner {
    width: 13px; height: 13px;
    border: 2px solid rgba(255,255,255,0.35);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 0.65s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  /* â”€â”€ Steps â”€â”€ */
  .steps { display: flex; flex-direction: column; gap: 0.5rem; }

  .step {
    background: var(--card);
    border-radius: 14px;
    padding: 1rem 1.1rem;
    display: flex;
    align-items: flex-start;
    gap: 0.9rem;
    border: 1px solid var(--border);
    animation: fadeUp 0.5s ease both;
  }

  .step:nth-child(1) { animation-delay: 0.10s; }
  .step:nth-child(2) { animation-delay: 0.17s; }
  .step:nth-child(3) { animation-delay: 0.24s; }
  .step:nth-child(4) { animation-delay: 0.31s; }
  .step:nth-child(5) { animation-delay: 0.38s; }
  .step:nth-child(6) { animation-delay: 0.45s; }

  .step-num {
    background: var(--warm-light);
    color: var(--warm);
    font-size: 0.78rem;
    font-weight: 700;
    width: 26px;
    height: 26px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
  }

  .step-content { flex: 1; }

  .step-title {
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 0.18rem;
    color: var(--ink);
  }

  .step-desc {
    color: var(--muted);
    font-size: 0.79rem;
    line-height: 1.5;
  }

  .step-desc strong { color: var(--ink); font-weight: 500; }
  .step-icon { font-size: 1rem; flex-shrink: 0; margin-top: 3px; opacity: 0.65; }

  /* â”€â”€ Tip â”€â”€ */
  .tip {
    margin-top: 1.1rem;
    background: var(--warm-light);
    border-left: 3px solid var(--warm);
    border-radius: 0 12px 12px 0;
    padding: 0.8rem 1rem;
    font-size: 0.79rem;
    color: var(--muted);
    line-height: 1.5;
    animation: fadeUp 0.5s 0.52s ease both;
  }

  .tip strong { color: var(--warm-dark); font-weight: 600; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <span class="icon">ğŸ“¸</span>
    <h1>Foto's in het <em>gedeelde album</em> zetten</h1>
    <p class="subtitle">Volg deze stappen in Google Foto's</p>
  </div>

  <div class="album-card">
    <div class="album-card-icon">ğŸ”—</div>
    <div class="album-card-text">
      <div class="album-card-label">Gedeeld album</div>
      <a id="albumLink" href="#" target="_blank" class="album-link-btn no-link">Wordt geladenâ€¦</a>
    </div>
  </div>

  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <div class="step-content">
        <div class="step-title">Open Google Foto's</div>
        <div class="step-desc">Open de <strong>Google Foto's</strong>-app op je telefoon. Heb je hem nog niet? Download hem gratis in de App Store of Play Store.</div>
      </div>
      <div class="step-icon">ğŸ“±</div>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <div class="step-content">
        <div class="step-title">Selecteer foto's</div>
        <div class="step-desc">Houd Ã©Ã©n foto <strong>ingedrukt</strong> om de selectiemodus te starten, tik daarna alle foto's aan die je wilt delen.</div>
      </div>
      <div class="step-icon">â˜‘ï¸</div>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <div class="step-content">
        <div class="step-title">Tik op het deelicoon</div>
        <div class="step-desc">Tik rechtsboven op het <strong>deelicoon</strong> (pijltje omhoog of drie stippen verbonden).</div>
      </div>
      <div class="step-icon">â¬†ï¸</div>
    </div>
    <div class="step">
      <div class="step-num">4</div>
      <div class="step-content">
        <div class="step-title">Kies "Toevoegen aan album"</div>
        <div class="step-desc">Tik op <strong>Toevoegen aan album</strong> in het deelmenu.</div>
      </div>
      <div class="step-icon">ï¼‹</div>
    </div>
    <div class="step">
      <div class="step-num">5</div>
      <div class="step-content">
        <div class="step-title">Selecteer het gedeelde album</div>
        <div class="step-desc">Kies het juiste album uit de lijst. Staat het er niet bij? Gebruik dan de link hierboven om het album te openen en jezelf toe te voegen.</div>
      </div>
      <div class="step-icon">ğŸ“</div>
    </div>
    <div class="step">
      <div class="step-num">6</div>
      <div class="step-content">
        <div class="step-title">Klaar!</div>
        <div class="step-desc">Je foto's zijn toegevoegd en meteen zichtbaar voor iedereen in het album. Bedankt! ğŸ‰</div>
      </div>
      <div class="step-icon">âœ…</div>
    </div>
  </div>

  <div class="tip">
    <strong>ğŸ’¡ Tip:</strong> Heb je Google Foto's nog niet? Download de app gratis via de <em>App Store</em> (iPhone) of <em>Play Store</em> (Android).
  </div>
</div>

<button class="admin-trigger" onclick="openPasswordModal()" title="Beheer">âš™ï¸</button>

<!-- Modal: Wachtwoord -->
<div class="modal-overlay" id="passwordModal" onclick="handleOverlay(event,'passwordModal')">
  <div class="modal">
    <h2>ğŸ”’ Beheerderslogin</h2>
    <p>Voer het beheerwachtwoord in om de albumlink aan te passen.</p>
    <label for="passwordInput">Wachtwoord</label>
    <input type="password" id="passwordInput" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
    <div class="error-msg" id="passwordError">Onjuist wachtwoord. Probeer opnieuw.</div>
    <div class="modal-actions">
      <button class="btn-secondary" onclick="closeModal('passwordModal')">Annuleer</button>
      <button class="btn-primary" onclick="checkPassword()">Inloggen</button>
    </div>
  </div>
</div>

<!-- Modal: Admin paneel -->
<div class="modal-overlay" id="adminModal" onclick="handleOverlay(event,'adminModal')">
  <div class="modal">
    <h2>âš™ï¸ Albumlink beheren</h2>
    <p>De link wordt opgeslagen en is meteen zichtbaar voor alle bezoekers.</p>
    <label for="linkInput">Albumlink</label>
    <input type="url" id="linkInput" placeholder="https://photos.google.com/share/..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    <div class="error-msg" id="saveError">Opslaan mislukt. Probeer opnieuw.</div>
    <div class="modal-actions">
      <button class="btn-danger" id="deleteBtn" onclick="deleteLink()">Verwijder</button>
      <button class="btn-secondary" onclick="closeModal('adminModal')">Annuleer</button>
      <button class="btn-primary" id="saveBtn" onclick="saveLink()">Opslaan</button>
    </div>
  </div>
</div>

<script>
  const API = `https://api.jsonbin.io/v3/b/${CONFIG.JSONBIN_ID}`;
  const HEADERS = {
    'Content-Type': 'application/json',
    'X-Master-Key': CONFIG.JSONBIN_KEY,
    'X-Bin-Versioning': 'false',
  };

  async function fetchLink() {
    try {
      const res  = await fetch(API + '/latest', { headers: HEADERS });
      const data = await res.json();
      return data.record?.link || null;
    } catch { return null; }
  }

  async function writeLink(url) {
    const res = await fetch(API, {
      method: 'PUT',
      headers: HEADERS,
      body: JSON.stringify({ link: url }),
    });
    if (!res.ok) throw new Error('JSONBin error');
  }

  function renderLink(url) {
    const el = document.getElementById('albumLink');
    if (url) {
      el.href = url;
      const display = url.replace(/^https?:\/\//, '').replace(/\/$/, '');
      el.textContent = display.length > 40 ? display.slice(0, 40) + 'â€¦' : display;
      el.classList.remove('no-link');
    } else {
      el.href = '#';
      el.textContent = 'Nog geen link ingesteld';
      el.classList.add('no-link');
    }
  }

  async function loadLink() {
    const url = await fetchLink();
    renderLink(url || null);
  }

  function openPasswordModal() {
    document.getElementById('passwordInput').value = '';
    document.getElementById('passwordError').classList.remove('visible');
    document.getElementById('passwordInput').classList.remove('error');
    openModal('passwordModal');
    setTimeout(() => document.getElementById('passwordInput').focus(), 120);
  }

  function checkPassword() {
    if (document.getElementById('passwordInput').value === CONFIG.ADMIN_PASSWORD) {
      closeModal('passwordModal');
      openAdminModal();
    } else {
      document.getElementById('passwordError').classList.add('visible');
      document.getElementById('passwordInput').classList.add('error');
      document.getElementById('passwordInput').value = '';
      document.getElementById('passwordInput').focus();
    }
  }

  async function openAdminModal() {
    document.getElementById('saveError').classList.remove('visible');
    const current = await fetchLink();
    document.getElementById('linkInput').value = current || '';
    openModal('adminModal');
    setTimeout(() => document.getElementById('linkInput').focus(), 120);
  }

  function setLoading(loading) {
    const btn = document.getElementById('saveBtn');
    const del = document.getElementById('deleteBtn');
    btn.disabled = loading;
    del.disabled = loading;
    btn.innerHTML = loading ? '<div class="spinner"></div> Opslaanâ€¦' : 'Opslaan';
  }

  async function saveLink() {
    let val = document.getElementById('linkInput').value.trim();
    if (!val) { deleteLink(); return; }
    if (!val.startsWith('http')) val = 'https://' + val;
    setLoading(true);
    document.getElementById('saveError').classList.remove('visible');
    try {
      await writeLink(val);
      renderLink(val);
      closeModal('adminModal');
    } catch {
      document.getElementById('saveError').classList.add('visible');
    } finally {
      setLoading(false);
    }
  }

  async function deleteLink() {
    if (!confirm('Weet je zeker dat je de albumlink wilt verwijderen?')) return;
    setLoading(true);
    try {
      await writeLink('');
      renderLink(null);
      closeModal('adminModal');
    } catch {
      document.getElementById('saveError').classList.add('visible');
    } finally {
      setLoading(false);
    }
  }

  function openModal(id)  { document.getElementById(id).classList.add('open'); }
  function closeModal(id) { document.getElementById(id).classList.remove('open'); }
  function handleOverlay(e, id) { if (e.target === document.getElementById(id)) closeModal(id); }

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') { closeModal('passwordModal'); closeModal('adminModal'); }
    if (e.key === 'Enter') {
      if (document.getElementById('passwordModal').classList.contains('open')) checkPassword();
      if (document.getElementById('adminModal').classList.contains('open')) saveLink();
    }
  });

  loadLink();
</script>
</body>
</html>
